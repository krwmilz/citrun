# Quote an entire file and add a variable declaration prefixing the string.
rule Stringize
{
	MakeLocate $(1) : $(LOCATE_SOURCE) ;
	SEARCH on $(2) = $(SEARCH_SOURCE) ;
	Depends $(1) : $(2) ;
	Clean clean : $(1) ;
}

if $(NT) {
	actions Stringize
	{
		> $(<) echo static const char *$(1:B) = R"(
		>> $(<) type $(>)
		>> $(<) echo )";
	}
} else {
	actions Stringize
	{
		> $(<) echo "static const char *$(1:B) = R\"("
		>> $(<) cat $(>)
		>> $(<) echo ")\";"
	}
}
