.Dd April 10, 2016
.Dt CITRUN_WRAP 1
.Os
.Sh NAME
.Nm citrun_wrap
.Nd add instrumentation to a native build command
.Sh SYNOPSIS
.Nm
.Ar make | jam | gcc | cmake | ...
.Sh DESCRIPTION
Add instrumentation to an existing native build command by configuring the
environment and then calling the command.
.Pp
If the native build system calls any of the following compilers, any output
object files should be instrumented:
.Pp
.Bl -tag -width Ds -offset indent -compact
.It cc
.It gcc
.It egcc
.It c++
.It g++
.It eg++
.El
.Pp
.Nm
exports the
.Ev CITRUN_PATH
and
.Ev PATH
environment variables before calling the native build command.
.Pp
.Bl -tag -width Ds
.It Ev CITRUN_PATH
Points to a directory containing compiler named symlinks that all point to
.Xr citrun_instrument 1 .
.It Ev PATH
Is prepended with
.Ev CITRUN_PATH
so that binaries in that directory have the highest precedence.
.El
.Sh EXAMPLES
The following
.Qq Makefile
is for a simple target application that we want to see run:
.Bd -literal -offset indent
PROG = program
SRCS = main.c

include <bsd.prog.mk>
.Ed
.Pp
Then
.Nm
is used to setup the environment correctly for instrumentation:
.Pp
.Dl $ citrun_wrap make
.Sh SEE ALSO
.Xr citrun_gl 1 ,
.Xr citrun_instrument 1
