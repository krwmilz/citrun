strip_preamble()
{
	file="${1}"
	tail -n +39 $file.citrun > $file.citrun_nohdr
}

strip_log()
{
	sed	-e "s,^.*: ,,"	\
		-e "s,'.*','',"	\
		-e "s,(.*),()," \
		-e "/Milliseconds/d" \
		< ${1} > ${1}.stripped
}

strip_millis()
{
	ok "are milliseconds sanitized" sed -i -e "/Milliseconds spent/d" $1
}

modify_PATH()
{
	export PATH="`pwd`/src:${PATH}"
}

enter_tmpdir()
{
	# Assume that a script wanting to enter a tmpdir also wants a local
	# process file directory.
	export CITRUN_PROCDIR="procdir/"

	tmpdir=`mktemp -d /tmp/citrun.XXXXXXXXXX`
	cd $tmpdir
}
